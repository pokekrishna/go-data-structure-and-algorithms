package merge_test

import (
	"fmt"
	"github.com/pokekrishna/dsa/algorithms/sort/merge"
	"github.com/stretchr/testify/assert"
	"testing"
)

func TestQuickSort(t *testing.T) {
	testcases := []struct {
		input    []int
		expected []int
	}{
		{
			input:    []int{6,5,3,1,8,7,2,4},
			expected: []int{1,2,3,4,5,6,7,8},
		},
		{
			input:    []int{38,27,43,3,9,82,10},
			expected: []int{3,9,10,27,38,43,82},
		},
		{
			input:    []int{1, 10, 2, 1, 9, 0},
			expected: []int{0, 1, 1, 2, 9, 10},
		},
		{
			input:    []int{1, 10, 2, 4, 9, 0},
			expected: []int{0, 1, 2, 4, 9, 10},
		},
		{
			input:    []int{},
			expected: []int{},
		},
		{
			input:    []int{1, 2},
			expected: []int{1, 2},
		},
		{
			input:    []int{1},
			expected: []int{1},
		},
		{
			input:    []int{10, -10},
			expected: []int{-10, 10},
		},
		{
			input:    []int{1, 3, 10, 8, 99, 22, 32, 78, 0},
			expected: []int{0, 1, 3, 8, 10, 22, 32, 78, 99},
		},
		{
			// Test if pivot index shift to right when needed
			input:    []int{1, 2, 3, 4, 50, 51, 49, 52, 53, 54},
			expected: []int{1, 2, 3, 4, 49, 50, 51, 52, 53, 54},
		},
		{
			// Test if pivot index shift to left when needed
			input:    []int{1, 72, 73, 72, 75, 50, 49, 52, 53, 54},
			expected: []int{1, 49, 50, 52, 53, 54, 72, 72, 73, 75},
		},
		{
			input:    []int{45342, 12117, 28173, 65533, 59154, 56778, 31840, 8322, 37893, 12778, 48196, 50141, 16174, 59345, 39030, 43057, 60222, 42388, 60342, 22614, 46048, 46237, 11184, 395, 49927, 64354, 56672, 23323, 14061, 41858, 34267, 30519, 22062, 24218, 23549, 3202, 7964, 57807, 18143, 14024, 30696, 63616, 10327, 22124, 10379, 61264, 33325, 30584, 12072, 19360, 5598, 17916, 14978, 54772, 34221, 63415, 16918, 31133, 41855, 5354, 8726, 35404, 13234, 38241, 39214, 38735, 14557, 24304, 9812, 61923, 20924, 3945, 49566, 57825, 16616, 40961, 5299, 11434, 4151, 32943, 16041, 35008, 35228, 57934, 21636, 37024, 52121, 59142, 5034, 52278, 54684, 47057, 5842, 33855, 2960, 52561, 36128, 45865, 1890, 62705},
			expected: []int{395, 1890, 2960, 3202, 3945, 4151, 5034, 5299, 5354, 5598, 5842, 7964, 8322, 8726, 9812, 10327, 10379, 11184, 11434, 12072, 12117, 12778, 13234, 14024, 14061, 14557, 14978, 16041, 16174, 16616, 16918, 17916, 18143, 19360, 20924, 21636, 22062, 22124, 22614, 23323, 23549, 24218, 24304, 28173, 30519, 30584, 30696, 31133, 31840, 32943, 33325, 33855, 34221, 34267, 35008, 35228, 35404, 36128, 37024, 37893, 38241, 38735, 39030, 39214, 40961, 41855, 41858, 42388, 43057, 45342, 45865, 46048, 46237, 47057, 48196, 49566, 49927, 50141, 52121, 52278, 52561, 54684, 54772, 56672, 56778, 57807, 57825, 57934, 59142, 59154, 59345, 60222, 60342, 61264, 61923, 62705, 63415, 63616, 64354, 65533},
		},
		{
			input:    []int{1, 2, 3, 4, 5, 6, 7, 8, 9},
			expected: []int{1, 2, 3, 4, 5, 6, 7, 8, 9},
		},
	}

	for i, tc := range testcases {
		t.Run(fmt.Sprintf("case %d", i), func(t *testing.T) {
			merge.Sort(tc.input)
			assert.Equal(t, tc.expected, tc.input, "Should be equal.")
		})
	}
}